!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(g){function l(n){if(n.getOption("disableInput"))return g.Pass;for(var e,t=n.listSelections(),o=[],i=0;i<t.length;i++){var l=t[i].head;if(!/\bcomment\b/.test(n.getTokenTypeAt(l)))return g.Pass;var r=n.getModeAt(l);if(e){if(e!=r)return g.Pass}else e=r;var c,f,a=null,m=e.blockCommentStart,s=e.lineComment;if(m&&e.blockCommentContinue){var u=(c=n.getLine(l.line)).lastIndexOf(e.blockCommentEnd,l.ch-e.blockCommentEnd.length);if(-1!=u&&u==l.ch-e.blockCommentEnd.length||s&&-1<(f=c.lastIndexOf(s,l.ch-1))&&/\bcomment\b/.test(n.getTokenTypeAt({line:l.line,ch:f+1})));else if(-1<(f=c.lastIndexOf(m,l.ch-m.length))&&u<f)if(C(0,c)>=f)a=c.slice(0,f);else{var d,p=n.options.tabSize;f=g.countColumn(c,f,p),a=n.options.indentWithTabs?y.call("\t",d=Math.floor(f/p))+y.call(" ",f-p*d):y.call(" ",f)}else-1<(f=c.indexOf(e.blockCommentContinue))&&f<=l.ch&&f<=C(0,c)&&(a=c.slice(0,f));null!=a&&(a+=e.blockCommentContinue)}if(null==a&&s&&v(n))if(null==c&&(c=n.getLine(l.line)),f=c.indexOf(s),l.ch||f){if(-1<f&&C(0,c)>=f){if(!(a=-1<C(l.ch,c))){var b=n.getLine(l.line+1)||"",h=b.indexOf(s);a=-1<h&&C(0,b)>=h||null}a&&(a=c.slice(0,f)+s+c.slice(f+s.length).match(/^\s*/)[0])}}else a="";if(null==a)return g.Pass;o[i]="\n"+a}n.operation(function(){for(var e=t.length-1;0<=e;e--)n.replaceRange(o[e],t[e].from(),t[e].to(),"+insert")})}function C(e,n){o.lastIndex=e;var t=o.exec(n);return t?t.index:-1}function v(e){var n=e.getOption("continueComments");return!n||"object"!=typeof n||!1!==n.continueLineComment}var o=/\S/g,y=String.prototype.repeat||function(e){return Array(e+1).join(this)};g.defineOption("continueComments",null,function(e,n,t){if(t&&t!=g.Init&&e.removeKeyMap("continueComment"),n){var o="Enter";"string"==typeof n?o=n:"object"==typeof n&&n.key&&(o=n.key);var i={name:"continueComment"};i[o]=l,e.addKeyMap(i)}})});