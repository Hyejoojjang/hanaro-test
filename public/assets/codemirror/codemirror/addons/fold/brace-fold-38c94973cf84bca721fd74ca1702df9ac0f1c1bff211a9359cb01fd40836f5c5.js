!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(k){"use strict";k.registerHelper("fold","brace",function(i,o){function e(e){for(var n=o.ch,r=0;;){var t=n<=0?-1:s.lastIndexOf(e,n-1);if(-1!=t){if(1==r&&t<o.ch)break;if(l=i.getTokenTypeAt(k.Pos(f,t+1)),!/^(comment|string)/.test(l))return t+1;n=t-1}else{if(1==r)break;r=1,n=s.length}}}var l,f=o.line,s=i.getLine(f),n="{",r="}",t=e("{");if(null==t&&(r="]",t=e(n="[")),null!=t){var u,a,d=1,c=i.lastLine();e:for(var g=f;g<=c;++g)for(var v=i.getLine(g),p=g==f?t:0;;){var m=v.indexOf(n,p),P=v.indexOf(r,p);if(m<0&&(m=v.length),P<0&&(P=v.length),(p=Math.min(m,P))==v.length)break;if(i.getTokenTypeAt(k.Pos(g,p+1))==l)if(p==m)++d;else if(!--d){u=g,a=p;break e}++p}if(null!=u&&f!=u)return{from:k.Pos(f,t),to:k.Pos(u,a)}}}),k.registerHelper("fold","import",function(o,e){function n(e){if(e<o.firstLine()||e>o.lastLine())return null;var n=o.getTokenAt(k.Pos(e,1));if(/\S/.test(n.string)||(n=o.getTokenAt(k.Pos(e,n.end+1))),"keyword"!=n.type||"import"!=n.string)return null;for(var r=e,t=Math.min(o.lastLine(),e+10);r<=t;++r){var i=o.getLine(r).indexOf(";");if(-1!=i)return{startCh:n.end,end:k.Pos(r,i)}}}var r,t=e.line,i=n(t);if(!i||n(t-1)||(r=n(t-2))&&r.end.line==t-1)return null;for(var l=i.end;;){var f=n(l.line+1);if(null==f)break;l=f.end}return{from:o.clipPos(k.Pos(t,i.startCh+1)),to:l}}),k.registerHelper("fold","include",function(r,e){function n(e){if(e<r.firstLine()||e>r.lastLine())return null;var n=r.getTokenAt(k.Pos(e,1));return/\S/.test(n.string)||(n=r.getTokenAt(k.Pos(e,n.end+1))),"meta"==n.type&&"#include"==n.string.slice(0,8)?n.start+8:void 0}var t=e.line,i=n(t);if(null==i||null!=n(t-1))return null;for(var o=t;;){if(null==n(o+1))break;++o}return{from:k.Pos(t,i+1),to:r.clipPos(k.Pos(o))}})});